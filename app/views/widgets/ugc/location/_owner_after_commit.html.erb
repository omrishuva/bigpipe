<div class=googleMapContainer>
  <%=cl_image_tag("Map_Marker-30_uvmgwm.png", :width=>20, :crop=>"scale")%>
	<%=render "widgets/ugc/text/button", 
			locals: locals.merge( 
															class: "fa fa-pencil #{current_direction.to_s}", 
															state: "edit", 
															button_text: "edit" )
  %>
  <div id="map"></div>
</div>

<script>
  function initMap( ) {
    var event;
    event = new CustomEvent( 'initMap', { 'detail':{ 'place_id': "<%=locals[:value]%>" } } );
    document.dispatchEvent(event);
  }
</script>

<%unless params[:loadScriptAfterServerResponse] == "false" %>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNaxhT2SJvK6MwGjYHB7pZB0Al0IYTknw&libraries=places&callback=initMap"
      async defer>
  </script>
<%else%>
  <script>initMap()</script>
<%end%>